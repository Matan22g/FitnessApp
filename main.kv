#: include kv/homescreen.kv
#: include kv/settingsscreen.kv
#: include kv/blankscreen.kv
#: include kv/workoutsscreen.kv
#: include kv/sessionscreen.kv
#: include kv/exercisescreen.kv
#: include kv/workoutscreen.kv
#: include kv/exercise_sessions_screen.kv
#: include kv/previous_workouts_screen.kv
#: include kv/exercise_stats_screen.kv

#: include FirebaseLoginScreen/firebaseloginscreen.kv
#:import Snackbar kivymd.uix.snackbar.Snackbar
<SendMailContent>
    orientation: "vertical"
    spacing: "20dp"
    size_hint_y: None
    height: "150dp"
    halign: "center"

    MDTextFieldRect:
        multiline: True
        size_hint_y:0.7
        hint_text: "Message"

<AddWorkoutContent>
    orientation: "vertical"
    spacing: "20dp"
    size_hint_y: None
    height: "33dp"
    MDTextField:
        hint_text: "Workout name"
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter valid name - English letters"
        input_filter: app.proper_input_filter
        on_text: app.text_input_length_filter(self, self.text, 12)

<UpdateWeightContent>
    orientation: "vertical"
    spacing: "20dp"
    size_hint_y: None
    height: "110dp"
    halign: "center"

    MDTextField:
        id: weight
        mode: "rectangle"
#        input_filter: app.proper_number_filter
        helper_text: "Kg" if app.units == "metric" else "Lbs"
        helper_text_mode: "persistent"
        input_filter: 'float'
        font_size: "32.5sp"
        pos_hint: {"center_x": .5}
        size_hint: (.45, .33)
        halign: "center"
        text: ""
        hint_text: "               "

        on_text: app.input_number_check(self, self.text)

    MDTextButton:
        id: weight_date
        font_size: "15dp"
        halign: "right"
        text: app.weight_date
        custom_color: 0, 0, 1, 1
        size_hint:0.3,0.1
        on_press:
            app.show_date_picker_for_weight()
        pos_hint: {"center_x": .5}

<Change_User_Name_Content>
    orientation: "vertical"
    spacing: "10dp"
    size_hint_y: None
    height: "53dp"
    MDTextField:
        hint_text: "User name"
        required: True
        helper_text_mode: "on_error"
        helper_text: "English letters and numbers only"
        input_filter: app.proper_input_filter

    MDLabel:
        text: ''
        theme_text_color: "Custom"
        text_color: 1, 0, 0, 1
        font_style:"Caption"

NavigationLayout:
    id: nav_layout
    ScreenManager:
        id: screen_manager

        FirebaseLoginScreen:
            id: firebase_login_screen
            name: "loginscreen"
            web_api_key: "AIzaSyB2OZaUuFaqCWDd9GX_Gt1lRdHF8H6ueHo"
            on_login_success:
                app.root= nav_layout
                app.change_screen("main_app_screen")
                nav_drawer.swipe_edge_width=20
                Snackbar(text="Logged in!").show()
                app.localId = self.localId
                app.idToken = self.idToken
                app.on_login()
                bottom_nav.on_resize()

        Screen:
            name: "main_app_screen"
            BoxLayout:
                id: main_layout
                orientation: 'vertical'
#                canvas:
#                    Rectangle:
#                        id: top_canvas
#                        pos: 0,app.window_size[1]/1.23
#                        size: self.size[0],self.size[1]/5
#                        source: "resources/loginback1.png"
#                    Rectangle:
#                        id: bottom_canvas
#                        pos: self.pos
#                        size: self.size[0],self.size[1]/8
#                        source: "resources/loginback1.png"

                CustomMDToolbar:
                    id: toolbar
                    title: "Hello Matan"
                    elevation: 0
                    right_action_items: [['menu', lambda x: nav_drawer.set_state()]]
                    left_action_items: [["chevron-left", lambda x: app.back_to_last_screen()]]
                    size_hint_y: 0.075
                    round : "100dp"





                ScreenManager:
                    id: screen_manager1

                    HomeScreen:
                        id: homescreen
                        name: "homescreen"

                    WorkoutsScreen:
                        id: workoutsscreen
                        name: "workoutsscreen"

                    ExerciseStatsScreen:
                        id: exercise_stats_screen
                        name: "exercise_stats_screen"

                    SessionScreen:
                        id: sessionscreen
                        name: "sessionscreen"

                    ExerciseScreen:
                        id: exercisescreen
                        name: "exercisescreen"

                    ExerciseSessionsScreen:
                        id: exercise_sessions_screen
                        name: "exercise_sessions_screen"

                    BlankScreen:
                        id: blankscreen
                        name: "blankscreen"

                    SettingsScreen:
                        id: settingsscreen
                        name: "settingsscreen"

                    WorkoutScreen:
                        id: workoutscreen
                        name: "workoutscreen"

                    PreviousWorkoutsScreen:
                        id: previous_workouts_screen
                        name: "previous_workouts_screen"

                MDBottomNavigation:
                    id: bottom_nav
                    pos_hint: {"center_x": .5}
                    size_hint_y:0.07
                    panel_color: .5, .5, 1, 0
                    text_color_active: 0,0,1,1
                    MDBottomNavigationItem:
                        id: 1
                        name: '1'
                        text: 'Dashboard'
                        icon: 'home'
                        on_tab_press: app.change_screen1("homescreen")

                    MDBottomNavigationItem:
                        id: 2
                        name: '2'
                        text: 'Workouts'
                        icon: 'dumbbell'
                        on_tab_press: app.change_screen1("workoutsscreen")

                    MDBottomNavigationItem:
                        id: 3

                        name: '3'
                        text: 'previous'
                        icon: 'calendar-clock'
                        on_tab_press: app.change_screen1("previous_workouts_screen")

                    MDBottomNavigationItem:
                        id: 4
                        name: '4'
                        text: 'Account'
                        icon: 'account'
                        on_tab_press: app.change_screen1("settingsscreen")

    MDNavigationDrawer:
        id: nav_drawer
        anchor: "right"
        size_hint_x: 0.45

        BoxLayout:
            orientation: "vertical"
            padding: "4dp"
            spacing: "10dp"
            canvas:
                Rectangle:
                    pos: self.pos
                    size: self.size
                    source: "resources/loginback1.png"
            Image:
                source: "resources/logo.png"
                size_hint_y: None
                size: "95dp", "95dp"


            ScrollView:

                MDList:

                    OneLineIconListItem:
                        text: "Home"
                        theme_text_color: "Custom"
                        text_color: 1,1,1,1
                        on_release:
                            app.change_screen1("homescreen")
#                            screen_manager1.current = "homescreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "home"
                            theme_text_color: "Custom"
                            text_color: 1,1,1,1

                    OneLineIconListItem:
                        text: "Friends"
                        theme_text_color: "Custom"
                        text_color: 1,1,1,1

                        on_release:
                            app.change_screen1("blankscreen")
#                            screen_manager1.current = "friendsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "account-group"
                            theme_text_color: "Custom"
                            text_color: 1,1,1,1

                    OneLineIconListItem:
                        text: "Recent"
                        theme_text_color: "Custom"
                        text_color: 1,1,1,1
                        on_release:
                            app.change_screen1("previous_workouts_screen")
#                            screen_manager1.current = "workoutsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "calendar-clock"
                            theme_text_color: "Custom"
                            text_color: 1,1,1,1

                    OneLineIconListItem:
                        text: "Workouts"
                        theme_text_color: "Custom"
                        text_color: 1,1,1,1
                        on_release:
                            app.change_screen1("workoutsscreen")
#                            screen_manager1.current = "workoutsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "dumbbell"
                            theme_text_color: "Custom"
                            text_color: 1,1,1,1

#                    OneLineIconListItem:
#                        text: "Log Out"
#                        theme_text_color: "Custom"
#                        text_color: 1,1,1,1
#                        on_release:
#                            app.on_logout()
#                        IconLeftWidget:
#                            icon: "login"
#                            theme_text_color: "Custom"
#                            text_color: 1,1,1,1

                    OneLineIconListItem:
                        text: "Settings"
                        theme_text_color: "Custom"
                        text_color: 1,1,1,1
                        on_release:
                            app.change_screen1("settingsscreen")
#                            screen_manager1.current = "settingsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "cog"

                            theme_text_color: "Custom"
                            text_color: 1,1,1,1


