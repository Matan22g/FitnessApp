#: include kv/homescreen.kv
#: include kv/settingsscreen.kv
#: include kv/blankscreen.kv
#: include kv/create_workout_screen.kv
#: include kv/workoutsscreen.kv
#: include kv/splitscreen.kv
#: include kv/splitscreen2.kv
#: include kv/splitscreen3.kv
#: include kv/sessionscreen.kv
#: include kv/exercisescreen.kv
#: include kv/workoutscreen.kv
#: include kv/exercise_sessions_screen.kv

#: include FirebaseLoginScreen/firebaseloginscreen.kv
#:import Snackbar kivymd.uix.snackbar.Snackbar

<AddWorkoutContent>
    orientation: "vertical"
    spacing: "20dp"
    size_hint_y: None
    height: "33dp"

    MDTextField:
        hint_text: "Workout name"
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter text"

NavigationLayout:
    id: nav_layout
    ScreenManager:
        id: screen_manager

        FirebaseLoginScreen:
            id: firebase_login_screen
            name: "loginscreen"
            web_api_key: "AIzaSyB2OZaUuFaqCWDd9GX_Gt1lRdHF8H6ueHo"
            on_login_success:
                app.root= nav_layout
                app.change_screen("main_app_screen")
                nav_drawer.swipe_edge_width=20
                Snackbar(text="Logged in!").show()
                app.localId = self.localId
                app.idToken = self.idToken
                app.on_login()


        Screen:
            name: "main_app_screen"
            BoxLayout:
                orientation: 'vertical'

                MDToolbar:
                    id: toolbar
                    title: "Hello Matan"
                    elevation: 10
                    right_action_items: [['menu', lambda x: nav_drawer.set_state()]]
                    left_action_items: [["chevron-left", lambda x: app.back_to_last_screen()]]
                    size_hint_y: 0.075
                    round : "100dp"
                ScreenManager:
                    id: screen_manager1

                    HomeScreen:
                        id: homescreen
                        name: "homescreen"

                    WorkoutsScreen:
                        id: workoutsscreen
                        name: "workoutsscreen"

                    Create_Workout_Screen:
                        id: create_workout_screen
                        name: "create_workout_screen"

                    SplitScreen:
                        id: splitscreen
                        name: "splitscreen"

                    SplitScreen2:
                        id: splitscreen2
                        name: "splitscreen2"

                    SplitScreen3:
                        id: splitscreen3
                        name: "splitscreen3"

                    SessionScreen:
                        id: sessionscreen
                        name: "sessionscreen"

                    ExerciseScreen:
                        id: exercisescreen
                        name: "exercisescreen"

                    ExerciseSessionsScreen:
                        id: exercise_sessions_screen
                        name: "exercise_sessions_screen"

                    BlankScreen:
                        id: blankscreen
                        name: "blankscreen"

                    SettingsScreen:
                        id: settingsscreen
                        name: "settingsscreen"

                    WorkoutScreen:
                        id: workoutscreen
                        name: "workoutscreen"



    MDNavigationDrawer:
        id: nav_drawer
        anchor: "right"
        width: "175dp"

        BoxLayout:
            orientation: "vertical"
            padding: "4dp"
            spacing: "10dp"

            Image:
                source: "resources/logo.png"
                size_hint_y: None
                size: "95dp", "95dp"


            ScrollView:

                MDList:

                    OneLineIconListItem:
                        text: "Home"
                        on_release:
                            app.change_screen1("homescreen")
#                            screen_manager1.current = "homescreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "home"

                    OneLineIconListItem:
                        text: "Friends"
                        on_release:
                            app.change_screen1("blankscreen")
#                            screen_manager1.current = "friendsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "account-group"

                    OneLineIconListItem:
                        text: "Workouts"
                        on_release:
                            app.change_screen1("workoutsscreen")
#                            screen_manager1.current = "workoutsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "weight-lifter"

                    OneLineIconListItem:
                        text: "Log Out"
                        on_release:
                            nav_drawer.swipe_edge_width=-2
                            screen_manager.transition.direction = 'right'
                            firebase_login_screen.login_success = "False"
                            firebase_login_screen.save_refresh_token("")
                            Snackbar(text="Logged out!").show()
                            app.change_screen("loginscreen")
#                            screen_manager.current = "loginscreen"
                            nav_drawer.set_state()
                            print(nav_drawer.swipe_edge_width)
                        IconLeftWidget:
                            icon: "login"

                    OneLineIconListItem:
                        text: "Settings"
                        on_release:
                            app.change_screen1("settingsscreen")
#                            screen_manager1.current = "settingsscreen"
                            nav_drawer.set_state()
                        IconLeftWidget:
                            icon: "cog-outline"




